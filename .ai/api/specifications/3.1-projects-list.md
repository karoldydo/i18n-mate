# 3.1 List Projects

**Endpoint:** `POST /rest/v1/rpc/list_projects_with_counts`
**Description:** Get paginated list of user's projects with aggregated counts, sorted by name (ascending)
**Authentication:** Required

**Request Body:**

```json
{
  "p_limit": 50,
  "p_offset": 0
}
```

**Query Parameters:**

- `order` - Sort order (default: `name.asc`, options: `name.asc`, `name.desc`, `created_at.asc`, `created_at.desc`)
- `count` - Enable exact counting (default: `exact`)

**Example Request:**

```text
POST /rest/v1/rpc/list_projects_with_counts?order=name.asc&count=exact
Content-Type: application/json

{
  "p_limit": 50,
  "p_offset": 0
}
```

**Success Response (200 OK):**

```json
[
  {
    "created_at": "2025-01-15T10:00:00Z",
    "default_locale": "en",
    "description": "Main application translations",
    "id": "uuid",
    "key_count": 45,
    "locale_count": 3,
    "name": "My App",
    "prefix": "app",
    "updated_at": "2025-01-15T10:00:00Z"
  }
]
```

**Headers:**

- `Content-Range: 0-49/120` - Pagination info when count=exact

**Error Responses:**

- `401 Unauthorized` - Missing or invalid auth token
- `400 Bad Request` - Invalid RPC parameters

**Business Logic:**

- RLS policy enforced within RPC function via `owner_user_id = auth.uid()`
- Function performs efficient LEFT JOINs to aggregate locale_count and key_count
- Supports pagination and sorting within single optimized query
