# 5.4 Delete Key

**Endpoint:** `DELETE /rest/v1/keys?id=eq.{key_id}`
**Description:** Delete key and all translations (cascading). **Irreversible.**
**Authentication:** Required

**Success Response (Mutation Returns void)**

The mutation hook returns `void` (no content), equivalent to 204 No Content semantics.

**Implementation Details:**

The underlying Supabase/PostgREST API returns:

```json
{
  "count": 1,
  "error": null,
  "status": 200
}
```

The client hook interprets `count > 0` as successful deletion and returns `void`, normalizing the behavior to match REST conventions (204 No Content semantics).

**Error Responses:**

**400 Bad Request:**

```json
{
  "data": null,
  "error": {
    "code": 400,
    "details": {
      "constraint": "uuid",
      "field": "keyId"
    },
    "message": "Invalid key ID format"
  }
}
```

**401 Unauthorized:**

```json
{
  "data": null,
  "error": {
    "code": 401,
    "message": "Authentication required"
  }
}
```

**403 Forbidden:**

```json
{
  "data": null,
  "error": {
    "code": 403,
    "message": "Project not owned by user"
  }
}
```

**404 Not Found:**

```json
{
  "data": null,
  "error": {
    "code": 404,
    "message": "Key not found or access denied"
  }
}
```

**500 Internal Server Error:**

```json
{
  "data": null,
  "error": {
    "code": 500,
    "details": {
      "original": "error"
    },
    "message": "Failed to delete key"
  }
}
```

**Error Conditions Detail:**

- `404 Not Found` occurs when `count === 0` after DELETE operation
- This can happen when: Key doesn't exist OR RLS policy denies access
- `403 Forbidden` occurs when RLS policy check fails before query execution

**Business Logic:**

- Cascade deletes all translations for this key (ON DELETE CASCADE)
- Key name can be immediately reused after deletion
- Operation is atomic (transaction-safe)
