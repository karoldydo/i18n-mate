# 5.4 Delete Key

**Endpoint:** `DELETE /rest/v1/keys?id=eq.{key_id}`
**Description:** Delete key and all translations (cascading). **Irreversible.**
**Authentication:** Required

**Success Response (Mutation Returns void)**

The mutation hook returns `void` (no content), equivalent to 204 No Content semantics.

**Implementation Details:**

The underlying Supabase/PostgREST API returns:

```json
{
  "count": 1,
  "error": null,
  "status": 200
}
```

The client hook interprets `count > 0` as successful deletion and returns `void`, normalizing the behavior to match REST conventions (204 No Content semantics).

**Error Responses:**

| Status Code | Condition | Message | Details |
|-------------|-----------|---------|---------|
| `400 Bad Request` | Invalid key ID format | "Invalid key ID format" | `{ field: "keyId", constraint: "uuid" }` |
| `401 Unauthorized` | Missing or invalid auth token | "Authentication required" | - |
| `403 Forbidden` | Project not owned by user (RLS policy violation) | "Project not owned by user" | - |
| `404 Not Found` | Key not found or access denied | "Key not found or access denied" | - |
| `500 Internal Server Error` | Database/cascade error | "Failed to delete key" | `{ original: error }` |

**Example Error Response:**
```json
{
  "data": null,
  "error": {
    "code": 404,
    "message": "Key not found or access denied"
  }
}
```

**Error Conditions Detail:**
- `404 Not Found` occurs when `count === 0` after DELETE operation
- This can happen when: Key doesn't exist OR RLS policy denies access
- `403 Forbidden` occurs when RLS policy check fails before query execution

**Business Logic:**

- Cascade deletes all translations for this key (ON DELETE CASCADE)
- Key name can be immediately reused after deletion
- Operation is atomic (transaction-safe)
