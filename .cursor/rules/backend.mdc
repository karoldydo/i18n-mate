---
description: Backend and database guidelines for Supabase integration
globs: src/shared/api/*.ts,src/shared/types/*.ts,supabase/**/*.ts,src/features/**/api/**/*.ts
alwaysApply: false
---

# Backend and Database

- Use Supabase for backend services, including authentication and database interactions.
- Follow Supabase guidelines for security and performance.
- Use Zod schemas to validate data exchanged with the backend.
- Use a shared, application-level Supabase client provided via React Context (`<SupabaseProvider>`) and the `useSupabase` hook
- In React Router loaders/actions and TanStack Query hooks, use the client from context
- Avoid direct client imports in components/features; use the API layer in `src/features/**/api`
- Avoid using `@supabase/supabase-js` directly
- Use SupabaseClient type from `src/shared/api/supabase.client.ts`, not from `@supabase/supabase-js`
